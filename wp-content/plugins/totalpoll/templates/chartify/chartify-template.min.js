var chartify=(function(d){var b={};var c=function(l,h,j){var g=document.getElementById(l).getContext("2d");var k=j==false?false:h.plugin.animation=="true"?true:false;var i=new Chart(g)[h.type](h.data,{responsive:true,animation:k,animationEasing:h.plugin.animationEasing,tooltipTemplate:a(h),tooltipFillColor:h.plugin.tooltipBgColor,tooltipFontColor:h.plugin.tooltipFontColor,tooltipTitleFontColor:h.plugin.tooltipFontColor,legendTemplate:f(h)});d.each(i.segments,function(m){this.percentage=h.data[m].percentage});i.update();i.$el=d("#"+l).closest(".canvas-holder");e(i,h.plugin.map);i.$el[0].chartInstance=i;i.$el[0].size=h.plugin.size;i.$el[0].options=h;i.$el[0].elId=l;return i};var a=function(g){var h="";var i="<%if (value == 0){%>"+g.localization.novotes.replace("%s","<%= value %>")+"<% }else if (value == 1){ %>"+g.localization.vote.replace("%s","<%= value %>")+"<% }else{ %>"+g.localization.votes.replace("%s","<%= value %>")+"<% } %>";if(g.plugin.map=="none"){h="<%if (label){%><%=label%>: <%}%>"}switch(g.results){case"number":default:h+=i;break;case"percentage":h+="<%= percentage %>%";break;case"both":h+="<%= percentage %>% • "+i;break;case"nothing":h="<%if (label){%><%=label%><%}%>";break}return h};var f=function(g){var h='<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span>';var i="<%if (segments[i].value == 0){%>"+g.localization.novotes.replace("%s","<%= segments[i].value %>")+"<% }else if (segments[i].value == 1){ %>"+g.localization.vote.replace("%s","<%= segments[i].value %>")+"<% }else{ %>"+g.localization.votes.replace("%s","<%= segments[i].value %>")+"<% } %>";h+="<%if(segments[i].label){%><%=segments[i].label%><%}%> ( ";switch(g.results){case"number":default:h+=i;break;case"percentage":h+="<%= segments[i].percentage %>%";break;case"both":h+="<%= segments[i].percentage %>% • "+i;break}h+=" )</li><%}%></ul>";return h};var e=function(h,i){var g=h.$el.siblings(".map-holder");g.html(h.generateLegend());switch(i){case"none":g.addClass("none");break;case"below":default:g.addClass("below");break;case"float":g.addClass("float");break}if(i!="none"){Chart.helpers.each(g[0].firstChild.childNodes,function(j,k){Chart.helpers.addEvent(j,"mouseover",function(){var l=h.segments[k];l.save();l.fillColor=l.highlightColor;h.showTooltip([l]);l.restore()})});Chart.helpers.addEvent(g[0],"mouseout",function(){h.draw()})}};b.init=function(m,i,k,j,h,l){var g={type:i,localization:l,plugin:j,data:k,results:h};c(m,g,true)};return b})(jQuery);